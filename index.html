<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">








  <meta property="fb:admins" content="<user_id>">
  <meta property="fb:app_id" content="<app_id>">



<meta name="description" content="可持续化柠檬树参上！">
<meta property="og:type" content="website">
<meta property="og:title" content="小宸工作站">
<meta property="og:url" content="http://www.kesisour.work/index.html">
<meta property="og:site_name" content="小宸工作站">
<meta property="og:description" content="可持续化柠檬树参上！">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小宸工作站">
<meta name="twitter:description" content="可持续化柠檬树参上！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.kesisour.work/">





  <title>小宸工作站</title>
  
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '<app_id>',
      xfbml      : true,
      version    : 'v2.10'
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net//sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>









</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小宸工作站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">莎士比亚应葬于此。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.kesisour.work/2019/07/31/15数码问题及其泛化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kesisour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小宸工作站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/31/15数码问题及其泛化/" itemprop="url">"8数码问题及其泛化"</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-31T07:30:44+08:00">
                2019-07-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/07/31/15数码问题及其泛化/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://www.kesisour.work/2019/07/31/15数码问题及其泛化/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  853
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://www.cnblogs.com/wmx3ng/archive/2012/10/24/2775941.html" target="_blank" rel="noopener">(本博客思路部分基本为转载)</a></p>
<p>先来看下题目：</p>
<h3 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h3><p>You are given a 4 × 4 grid, which consists of 15 number cells and an empty cell.<br>All numbers are unique and ranged from 1 to 15.<br>In this board, the cells which are adjacent with the empty cell can move to the empty cell.<br>Your task is to make the input grid to the target grid shown in the figure below.<br>In the following example (sample input), you can get the target grid in two moves.<br><img src="/2019/07/31/15数码问题及其泛化/img.jpg"></p>
<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>he first line contains an integer T (1 &lt;= T &lt;= 10^5) denoting the number of test cases.<br>Each test case consists of four lines each containing four space-separated integers, denoting the input grid. 0 indicates the empty cell.</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>For each test case, you have to print the answer in one line.<br>If you can’t get the target grid within 120 moves, then print ‘No’, else print ‘Yes’.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><blockquote>
<p>2<br>1 2 3 4<br>5 6 7 8<br>9 10 0 12<br>13 14 11 15<br>1 2 3 4<br>5 6 7 8<br>9 10 11 12<br>13 15 14 0</p>
</blockquote>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><blockquote>
<p>Yes<br>No</p>
</blockquote>
<h3 id="题目思路"><a href="#题目思路" class="headerlink" title="题目思路"></a>题目思路</h3><p>先来学一下8数码问题的解法：<br>首先把所有数字（不包括空位的0）写成一行，就得到了一个1~8的排列，考虑空位的交换情况：1.左右交换，2.上下交换。对于左右交换而言，是不会改变写出的排列的逆序数的；而对上下交换，相当于在排列中向前或向后跳了两个位置，那么要么两个数都比它大或小，这样逆序数加2或减2，要么两个数一个比它大一个比它小，这样逆序数不变，综上，对于八数码问题，操作不会改变逆序数的奇偶性，所以只有初始状态和指定状态的逆序数奇偶性相同就有解。</p>
<p>弄清楚了八数码，扩展起来就容易了，现在我们将其扩展到N维（即N <em> N的board，N </em> N - 1数码问题）。</p>
<p>首先无论N的奇偶，左右交换不改变逆序数，N为奇数时：上下交换逆序数增加N-1或减少N-1或不变，因为N为奇数，所以逆序数奇偶性不变；而N为偶数时：上下交换一次奇偶性改变一次。</p>
<p><strong>结论：N为奇数时，初始状态与指定状态逆序数奇偶性相同即有解；N为偶数时，先计算出从初始状态到指定状态，空位要移动的行数m，如果初始状态的逆序数加上m与指定状态的逆序数奇偶性相同，则有解。</strong></p>
<h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> numm ch-48</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pd putchar(<span class="meta-string">' '</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pn putchar(<span class="meta-string">'\n'</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mid (l + r) / 2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fre1 freopen(<span class="meta-string">"1.txt"</span>,<span class="meta-string">"r"</span>,stdin)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fre2 freopen(<span class="meta-string">"2.txt"</span>,<span class="meta-string">"w"</span>,stdout)</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(T&amp; res)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>; <span class="keyword">char</span> ch;</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch = getchar())) (ch == <span class="string">'-'</span>) &amp;&amp; (flag = <span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">for</span> (res = numm; <span class="built_in">isdigit</span>(ch = getchar()); res = (res &lt;&lt; <span class="number">1</span>) + (res &lt;&lt; <span class="number">3</span>) + numm);</span><br><span class="line">    flag &amp;&amp; (res = -res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(T x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span>) <span class="built_in">putchar</span>(<span class="string">'-'</span>), x = -x;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; <span class="number">9</span>) write(x / <span class="number">10</span>);</span><br><span class="line">    <span class="built_in">putchar</span>(x % <span class="number">10</span> + <span class="string">'0'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">16</span>];</span><br><span class="line"><span class="keyword">int</span> b[<span class="number">15</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    read(T);</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">        <span class="keyword">int</span> m, cnt = <span class="number">0</span>, t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">                read(a[i * <span class="number">4</span> + j]);</span><br><span class="line">                <span class="keyword">if</span> (a[i * <span class="number">4</span> + j] == <span class="number">0</span>) &#123;</span><br><span class="line">                    m = <span class="number">3</span> - i;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    b[t++] = a[i * <span class="number">4</span> + j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (b[i] &lt; b[j]) &#123;</span><br><span class="line">                    cnt++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!((cnt + m) % <span class="number">2</span>)) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Yes\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"No\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.kesisour.work/2019/07/30/Python-for-Data-Science(3)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kesisour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小宸工作站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/30/Python-for-Data-Science(3)/" itemprop="url">233</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-30T03:48:18+08:00">
                2019-07-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/data-science/" itemprop="url" rel="index">
                    <span itemprop="name">data science</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/07/30/Python-for-Data-Science(3)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://www.kesisour.work/2019/07/30/Python-for-Data-Science(3)/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.6k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  8
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Loops-and-List-Comprehensions"><a href="#Loops-and-List-Comprehensions" class="headerlink" title="Loops and List Comprehensions"></a>Loops and List Comprehensions</h2><h3 id="Loops-循环"><a href="#Loops-循环" class="headerlink" title="Loops(循环)"></a>Loops(循环)</h3><p>Loops are a way to repeatedly execute some code.Here’s an example:<br>(没啥好讲的吧？ 注意一下语法格式就行</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">planets = [<span class="string">'Mercury'</span>, <span class="string">'Venus'</span>, <span class="string">'Earth'</span>, <span class="string">'Mars'</span>, <span class="string">'Jupiter'</span>, <span class="string">'Saturn'</span>, <span class="string">'Uranus'</span>, <span class="string">'Neptune'</span>]</span><br><span class="line"><span class="keyword">for</span> planet <span class="keyword">in</span> planets:</span><br><span class="line">    print(planet, end = <span class="string">' '</span>) <span class="comment"># print all on same line</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mercury Venus Earth Mars Jupiter Saturn Uranus Neptune</span><br></pre></td></tr></table></figure>
<p>In addition to lists,we can iterate over the elements of a tuple:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">multiplicands = (<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">product = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> mult <span class="keyword">in</span> multiplicands:</span><br><span class="line">    product = product * mult</span><br><span class="line">product</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">360</span><br></pre></td></tr></table></figure>
<p>除了列表与元组，字符串也支持循环：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'steganograpHy is the practicE of conceaLing a file, message, image, or video within another fiLe, message, image, Or video.'</span></span><br><span class="line">msg = <span class="string">''</span></span><br><span class="line"><span class="comment"># print all the uppercase letters in s, one at a time</span></span><br><span class="line"><span class="keyword">for</span> char <span class="keyword">in</span> s:</span><br><span class="line">    <span class="keyword">if</span> char.isupper():</span><br><span class="line">        print(char, end=<span class="string">''</span>)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HELLO</span><br></pre></td></tr></table></figure>
<p><code>range()</code> is a function that returns a sequence of numbers. It turns out to be very useful for writing loops.<br>For example, if we want to repeat some action 5 times:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">    print(<span class="string">"Doing important work. i ="</span>, i)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Doing important work. i = 0</span><br><span class="line">Doing important work. i = 1</span><br><span class="line">Doing important work. i = 2</span><br><span class="line">Doing important work. i = 3</span><br><span class="line">Doing important work. i = 4</span><br></pre></td></tr></table></figure>
<p>除了<code>for</code>循环，还有<code>while</code>循环：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> i &lt; <span class="number">10</span>:</span><br><span class="line">    print(i, end=<span class="string">' '</span>)</span><br><span class="line">    i += <span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 1 2 3 4 5 6 7 8 9</span><br></pre></td></tr></table></figure>
<h3 id="List-comprehensions"><a href="#List-comprehensions" class="headerlink" title="List comprehensions"></a>List comprehensions</h3><p>直接看个例子来理解一下<code>list comprehension</code>:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">squares = [n**<span class="number">2</span> <span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line">squares</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</span><br></pre></td></tr></table></figure>
<p>We can also add an <code>if</code> condition:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">short_planets = [planet <span class="keyword">for</span> planet <span class="keyword">in</span> planets <span class="keyword">if</span> len(planet) &lt; <span class="number">6</span>]</span><br><span class="line">short_planets</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&apos;Venus&apos;, &apos;Earth&apos;, &apos;Mars&apos;]</span><br></pre></td></tr></table></figure>
<p><del>好像SQL啊</del><br>Here’s an example of filtering with an if condition and applying some transformation to the loop variable:<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># str.upper() returns an all-caps version of a string</span></span><br><span class="line">loud_short_planets = [planet.upper() + <span class="string">'!'</span> <span class="keyword">for</span> planet <span class="keyword">in</span> planets <span class="keyword">if</span> len(planet) &lt; <span class="number">6</span>]</span><br><span class="line">loud_short_planets</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&apos;VENUS!&apos;, &apos;EARTH!&apos;, &apos;MARS!&apos;]</span><br></pre></td></tr></table></figure>
<p>如果你觉得难读，你也可以写成这样：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    planet.upper() + <span class="string">'!'</span> </span><br><span class="line">    <span class="keyword">for</span> planet <span class="keyword">in</span> planets </span><br><span class="line">    <span class="keyword">if</span> len(planet) &lt; <span class="number">6</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p><del>更像SQL了</del></p>
<h2 id="Strings-and-Dictionaries"><a href="#Strings-and-Dictionaries" class="headerlink" title="Strings and Dictionaries"></a>Strings and Dictionaries</h2><h3 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h3><p><strong>One place where the Python language really shines is in the manipulation of strings.</strong></p>
<p>This section will cover some of Python’s built-in string methods and formatting operations.<br>Such string manipulation patterns comde up often in the context of data science work, and is one of big perk of Python in this context.</p>
<h3 id="String-syntax"><a href="#String-syntax" class="headerlink" title="String syntax"></a>String syntax</h3><p>String in Python can be defined using either single or double quotations.They are functonally equivalent.</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="string">'Pluto is a planet'</span></span><br><span class="line">y = <span class="string">'Pluto is a planet'</span></span><br><span class="line">x == y</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">True</span><br></pre></td></tr></table></figure>
<p>那为啥还要分单双引号呢？看下面这个例子：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"Pluto's a planet!"</span>)</span><br><span class="line">print(<span class="string">'My dog is named "Pluto"'</span>)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Pluto&apos;s a planet!</span><br><span class="line">My dog is named &quot;Pluto&quot;</span><br></pre></td></tr></table></figure>
<p>当然，我们也可以用反斜杠的方式：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'Pluto\'s a planet!'</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;Pluto&apos;s a planet!&quot;</span><br></pre></td></tr></table></figure>
<img src="/2019/07/30/Python-for-Data-Science(3)/反斜杠用法.png" title="backslash用法">
<p>In addition, Python’s tripe quote syntax for strings lets us include newlines literally. We’ve already seen this in the docstrings we use to document our functions, but we can use them anywhere we want to define a string.</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">"hello\nworld"</span></span><br><span class="line">b = <span class="string">"""hello</span></span><br><span class="line"><span class="string">world"""</span></span><br><span class="line">print(b)</span><br><span class="line">a == b</span><br><span class="line">```</span><br></pre></td></tr></table></figure>
<p>hello<br>world<br>True<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">上面可以看到，两种定义方法是等价的。</span><br><span class="line"></span><br><span class="line">### Strings are sequences</span><br><span class="line"></span><br><span class="line">String can be thought of as sequences of characters. **Almost everything we&apos;ve seen that we can do to a list, we can also do to a string.**</span><br><span class="line"></span><br><span class="line">```py</span><br><span class="line">planet = &apos;Pluto&apos;</span><br><span class="line">planet[0]</span><br><span class="line">planet[-3:]</span><br><span class="line">len(Planet)</span><br><span class="line">[cagr + &apos;!&apos; for char in planet]</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">P</span><br><span class="line">&apos;uto&apos;</span><br><span class="line">6</span><br><span class="line">[&apos;P! &apos;, &apos;l! &apos;, &apos;u! &apos;, &apos;t! &apos;, &apos;o! &apos;]</span><br></pre></td></tr></table></figure>
<p><strong>But a majoy way in which they differ from lists is that they are immutable. We can’t modify them.</strong></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这种操作就会报错！！！</span></span><br><span class="line">planet[<span class="number">0</span>] = <span class="string">'B'</span></span><br></pre></td></tr></table></figure>
<p>(这好像跟元组差不多？</p>
<h3 id="String-methods"><a href="#String-methods" class="headerlink" title="String methods"></a>String methods</h3><ol>
<li>ALL CPS</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">claim = <span class="string">"Pluto is a planet!"</span></span><br><span class="line">claim.upper()</span><br><span class="line"><span class="comment"># 不改变 calim 本身</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;PLUTO IS A PLANET!&apos;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>all lowercase</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">claim.lower()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;pluto is a planet!&apos;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>search for the first index of a string</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">claim.index(<span class="string">'plan'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">111</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><code>startswith()</code> and <code>endswith()</code></li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">claim.startswith(planet)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">True</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">claim.endswith(<span class="string">'dwarf planet'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">False</span><br></pre></td></tr></table></figure>
<ol start="5">
<li><code>split()</code> and <code>join()</code></li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">words = claim.split()</span><br><span class="line">words</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&apos;Pluto&apos;, &apos;is&apos;, &apos;a&apos;, &apos;planet!&apos;]</span><br></pre></td></tr></table></figure>
<p>默认空格，也可以自己传参</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">datestr = <span class="string">'1956-01-31'</span></span><br><span class="line">a =  datestr.split(<span class="string">'-'</span>)</span><br><span class="line">print(a)</span><br><span class="line">year, month, day = datestr.split(<span class="string">'-'</span>)</span><br><span class="line">print(year, month, day)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&apos;1956&apos;, &apos;01&apos;, &apos;31&apos;]</span><br><span class="line">1956 01 31</span><br></pre></td></tr></table></figure>
<p><code>jion()</code> 函数刚好相反哦~</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'/'</span>.join([month, day, year])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;01/31/1956&apos;</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>Building strings with <code>format()</code></li>
</ol>
<p>直接用 + 就可以将两个字符串相连</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">planet + <span class="string">', we miss you.'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;Pluto, we miss you.&apos;</span><br></pre></td></tr></table></figure>
<p>If we want to throw in any non-string objects, we have to be careful to call str() on them first</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">position = <span class="number">9</span></span><br><span class="line">planet + <span class="string">", you'll always be the "</span> + str(position) + <span class="string">"th planet to me."</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;Pluto, you&apos;ll always be the 9th planet to me.&quot;</span><br></pre></td></tr></table></figure>
<p>这个 code 看起来就不舒服，所以，还有下面这种方法：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"&#123;&#125;, you'll always be the &#123;&#125;th planet to me."</span>.format(planet, position)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;Pluto, you&apos;ll always be the 9th planet to me.&quot;</span><br></pre></td></tr></table></figure>
<p>是不是看懂了？还可以在大括号内自定义格式喔~</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pluto_mass = <span class="number">1.303</span> * <span class="number">10</span>**<span class="number">22</span></span><br><span class="line">earth_mass = <span class="number">5.9722</span> * <span class="number">10</span>**<span class="number">24</span></span><br><span class="line">population = <span class="number">52910390</span></span><br><span class="line"><span class="comment">#         2 decimal points   3 decimal points, format as percent     separate with commas</span></span><br><span class="line"><span class="string">"&#123;&#125; weighs about &#123;:.2&#125; kilograms (&#123;:.3%&#125; of Earth's mass). It is home to &#123;:,&#125; Plutonians."</span>.format(</span><br><span class="line">    planet, pluto_mass, pluto_mass / earth_mass, population,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;Pluto weighs about 1.3e+22 kilograms (0.218% of Earth&apos;s mass). It is home to 52,910,390 Plutonians.&quot;</span><br></pre></td></tr></table></figure>
<p>可以根据下标指定字符串<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Referring to format() arguments by index, starting from 0</span></span><br><span class="line">s = <span class="string">"""Pluto's a &#123;0&#125;.</span></span><br><span class="line"><span class="string">No, it's a &#123;1&#125;.</span></span><br><span class="line"><span class="string">&#123;0&#125;!</span></span><br><span class="line"><span class="string">&#123;1&#125;!"""</span>.format(<span class="string">'planet'</span>, <span class="string">'dwarf planet'</span>)</span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure></p>
<p>···<br>Pluto’s a planet.<br>No, it’s a dwarf planet.<br>planet!<br>dwarf planet!<br>···</p>
<h3 id="Dictionaries"><a href="#Dictionaries" class="headerlink" title="Dictionaries"></a>Dictionaries</h3><p>Dictionaries are a built-in Python data structure for mapping keys to values.</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本定义方法</span></span><br><span class="line">numbers = &#123;<span class="string">'one'</span>:<span class="number">1</span>, <span class="string">'two'</span>:<span class="number">2</span>, <span class="string">'three'</span>:<span class="number">3</span>&#125;</span><br><span class="line">numvers[<span class="string">'one'</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>
<p>我们也可以直接添加元素：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nukber[<span class="string">'eleven'</span>] = <span class="number">11</span></span><br><span class="line">numbers</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&apos;one&apos;: 1, &apos;two&apos;: 2, &apos;three&apos;: 3, &apos;eleven&apos;: 11&#125;</span><br></pre></td></tr></table></figure>
<p>修改也是这种操作：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">numbers[<span class="string">'one'</span>] = <span class="string">'Pluto'</span></span><br><span class="line">numbers</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&apos;one&apos;: &apos;Pluto&apos;, &apos;two&apos;: 2, &apos;three&apos;: 3, &apos;eleven&apos;: 11&#125;</span><br></pre></td></tr></table></figure>
<p>Python has <strong>dictionary comprehensions</strong> with a syntax similar to the list comprehensions we saw in the previous tutorial.</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">planets = [<span class="string">'Mercury'</span>, <span class="string">'Venus'</span>, <span class="string">'Earth'</span>, <span class="string">'Mars'</span>, <span class="string">'Jupiter'</span>, <span class="string">'Saturn'</span>, <span class="string">'Uranus'</span>, <span class="string">'Neptune'</span>]</span><br><span class="line">planet_to_initial = &#123;planet: planet[<span class="number">0</span>] <span class="keyword">for</span> planet <span class="keyword">in</span> planets&#125;</span><br><span class="line">planet_to_initial</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;&apos;Mercury&apos;: &apos;M&apos;,</span><br><span class="line"> &apos;Venus&apos;: &apos;V&apos;,</span><br><span class="line"> &apos;Earth&apos;: &apos;E&apos;,</span><br><span class="line"> &apos;Mars&apos;: &apos;M&apos;,</span><br><span class="line"> &apos;Jupiter&apos;: &apos;J&apos;,</span><br><span class="line"> &apos;Saturn&apos;: &apos;S&apos;,</span><br><span class="line"> &apos;Uranus&apos;: &apos;U&apos;,</span><br><span class="line"> &apos;Neptune&apos;: &apos;N&apos;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用 in 的条件判断</span></span><br><span class="line"><span class="string">'Saturn'</span> <span class="keyword">in</span> planet_to_initial</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">True</span><br></pre></td></tr></table></figure>
<p>这个映射是前面映射后面哈，<code>&#39;E&#39; in planets</code>这样就是<code>False</code>了。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> numbers:</span><br><span class="line">    print(<span class="string">"&#123;&#125; = &#123;&#125;"</span>.format(k, numbers[k]))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">one = Pluto</span><br><span class="line">two = 2</span><br><span class="line">three = 3</span><br><span class="line">eleven = 11</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Get all the initials, sort them alphabetically, and put them in a space-separated string.</span></span><br><span class="line"><span class="string">' '</span>.join(sorted(planet_to_initial.values()))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;E J M M N S U V&apos;</span><br></pre></td></tr></table></figure>
<p>The very useful <code>dict.items()</code> method lets us iterate over the keys and values of a dictionary simultaneously. (In Python jargon, an item refers to a key, value pair)</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">planet_to_initial.items()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dict_items([(&apos;Mercury&apos;, &apos;M&apos;), (&apos;Venus&apos;, &apos;V&apos;), (&apos;Earth&apos;, &apos;E&apos;), (&apos;Mars&apos;, &apos;M&apos;), (&apos;Jupiter&apos;, &apos;J&apos;), (&apos;Saturn&apos;, &apos;S&apos;), (&apos;Uranus&apos;, &apos;U&apos;), (&apos;Neptune&apos;, &apos;N&apos;)])</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> planet, initial <span class="keyword">in</span> planet_to_initial.items():</span><br><span class="line">    print(<span class="string">"&#123;&#125; begins with \"&#123;&#125;\""</span>.format(planet.rjust(<span class="number">10</span>), initial))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Mercury begins with &quot;M&quot;</span><br><span class="line">  Venus begins with &quot;V&quot;</span><br><span class="line">  Earth begins with &quot;E&quot;</span><br><span class="line">   Mars begins with &quot;M&quot;</span><br><span class="line">Jupiter begins with &quot;J&quot;</span><br><span class="line"> Saturn begins with &quot;S&quot;</span><br><span class="line"> Uranus begins with &quot;U&quot;</span><br><span class="line">Neptune begins with &quot;N&quot;</span><br></pre></td></tr></table></figure>
<p><strong>tips:</strong> <code>ljust()</code> and <code>rjust()</code> 是右对齐和左对齐</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.kesisour.work/2019/07/28/Python-for-Data-Science(2)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kesisour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小宸工作站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/28/Python-for-Data-Science(2)/" itemprop="url">"Python for Data Science(2)"</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-28T01:15:29+08:00">
                2019-07-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/data-science/" itemprop="url" rel="index">
                    <span itemprop="name">data science</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/07/28/Python-for-Data-Science(2)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://www.kesisour.work/2019/07/28/Python-for-Data-Science(2)/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  883
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Booleans-and-conditionals"><a href="#Booleans-and-conditionals" class="headerlink" title="Booleans and conditionals"></a>Booleans and conditionals</h2><h3 id="Booleans"><a href="#Booleans" class="headerlink" title="Booleans"></a>Booleans</h3><p>Python里面也有<code>bool</code>类型的变量<br>True 和 False <del>记得首字母大写</del></p>
<p>所有 Comparison Operations 的返回值都是bool类型的</p>
<p>Python还提供三个运算符：<code>and</code> <code>or</code> <code>not</code> 分别对应 与 或 非 三种操作<br><del>直白到令人不适</del></p>
<img src="/2019/07/28/Python-for-Data-Science(2)/youxian.png" title="Python运算符优先级">
<h3 id="Conditionals"><a href="#Conditionals" class="headerlink" title="Conditionals"></a>Conditionals</h3><p>Python中的条件运算符长这样：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inspect</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x == <span class="number">0</span>:</span><br><span class="line">        print(x, <span class="string">"is zero"</span>)</span><br><span class="line">    <span class="keyword">elif</span> x &gt; <span class="number">0</span>:</span><br><span class="line">        print(x, <span class="string">"is positive"</span>)</span><br><span class="line">    <span class="keyword">elif</span> x &lt; <span class="number">0</span>:</span><br><span class="line">        print(x, <span class="string">"is negative"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(x, <span class="string">"is unlike anything I've ever seen..."</span>)</span><br></pre></td></tr></table></figure>
<p>哦对，Python中好像没有大括号这种操作，命令域全靠缩进</p>
<h2 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h2><h3 id="Introduce"><a href="#Introduce" class="headerlink" title="Introduce"></a>Introduce</h3><p>Lists in Python represent ordered sequences of values.<br>跟C++中的数组相类似</p>
<p>下面是创建方法：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">primes = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]</span><br><span class="line"></span><br><span class="line">planets = [<span class="string">'Mercury'</span>, <span class="string">'Venus'</span>, <span class="string">'Earth'</span>, <span class="string">'Mars'</span>, <span class="string">'Jupiter'</span>, <span class="string">'Saturn'</span>, <span class="string">'Uranus'</span>, <span class="string">'Neptune'</span>]</span><br><span class="line"></span><br><span class="line">hands = [</span><br><span class="line">    [<span class="string">'J'</span>, <span class="string">'Q'</span>, <span class="string">'K'</span>],</span><br><span class="line">    [<span class="string">'2'</span>, <span class="string">'2'</span>, <span class="string">'2'</span>],</span><br><span class="line">    [<span class="string">'6'</span>, <span class="string">'A'</span>, <span class="string">'K'</span>], <span class="comment"># (Comma after the last element is optional)</span></span><br><span class="line">]</span><br><span class="line"><span class="comment"># (I could also have written this on one line, but it can get hard to read)</span></span><br><span class="line">hands = [[<span class="string">'J'</span>, <span class="string">'Q'</span>, <span class="string">'K'</span>], [<span class="string">'2'</span>, <span class="string">'2'</span>, <span class="string">'2'</span>], [<span class="string">'6'</span>, <span class="string">'A'</span>, <span class="string">'K'</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面这个操作比较骚</span></span><br><span class="line"><span class="comment"># A list can contain a mix of different types of variables:</span></span><br><span class="line">my_favourite_things = [<span class="number">32</span>, <span class="string">'raindrops on roses'</span>, help]</span><br></pre></td></tr></table></figure></p>
<p>可以通过 index 来访问 list 中的元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">planets[<span class="number">0</span>]</span><br><span class="line">planets[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面这俩比较骚：</span></span><br><span class="line">planets[<span class="number">-1</span>]</span><br><span class="line">planets[<span class="number">-2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 群引用遵循左闭右开原则，可以省略初始和结尾</span></span><br><span class="line">planets[<span class="number">0</span>:<span class="number">3</span>]</span><br><span class="line">planets[:<span class="number">3</span>]</span><br><span class="line">planets[<span class="number">3</span>:]</span><br><span class="line"></span><br><span class="line">planets[<span class="number">1</span>:<span class="number">-1</span>]</span><br><span class="line">planets[<span class="number">-3</span>:]</span><br></pre></td></tr></table></figure>
<p>他们的值分别是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&apos;Mercury&apos;</span><br><span class="line">&apos;Venus&apos;</span><br><span class="line"></span><br><span class="line">&apos;Neptune&apos;</span><br><span class="line">&apos;Uranus&apos;</span><br><span class="line"></span><br><span class="line">[&apos;Mercury&apos;, &apos;Venus&apos;, &apos;Earth&apos;]</span><br><span class="line">[&apos;Mercury&apos;, &apos;Venus&apos;, &apos;Earth&apos;]</span><br><span class="line">[&apos;Mars&apos;, &apos;Jupiter&apos;, &apos;Saturn&apos;, &apos;Uranus&apos;, &apos;Neptune&apos;]</span><br><span class="line"></span><br><span class="line">[&apos;Venus&apos;, &apos;Earth&apos;, &apos;Mars&apos;, &apos;Jupiter&apos;, &apos;Saturn&apos;, &apos;Uranus&apos;]</span><br><span class="line">[&apos;Saturn&apos;, &apos;Uranus&apos;, &apos;Neptune&apos;]</span><br></pre></td></tr></table></figure>
<p>想要修改通过类似下面的操作就可以了：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">planets[<span class="number">3</span>] = <span class="string">'Malacandra'</span></span><br><span class="line">planets[:<span class="number">3</span>] = [<span class="string">'Mur'</span>, <span class="string">'Vee'</span>, <span class="string">'Ur'</span>]</span><br></pre></td></tr></table></figure></p>
<h3 id="List-functions"><a href="#List-functions" class="headerlink" title="List functions"></a>List functions</h3><p><code>len</code> gives the lengths if a list：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">len(planets)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8</span><br></pre></td></tr></table></figure>
<p><code>sorted</code> returns a sorted version of a list:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sorted(planets)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># The planets sorted in alphabetical order(字典序)</span><br><span class="line">[&apos;Earth&apos;, &apos;Jupiter&apos;, &apos;Mars&apos;, &apos;Mercury&apos;, &apos;Neptune&apos;, &apos;Saturn&apos;, &apos;Uranus&apos;, &apos;Venus&apos;]</span><br></pre></td></tr></table></figure>
<p>注：<code>sorted</code>并不改变原list的顺序</p>
<p><code>max</code>, <code>min</code> and <code>sum</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">primes = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]</span><br><span class="line">max(primes)</span><br><span class="line">min(primes)</span><br><span class="line">sum(primes)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">17</span><br><span class="line">7</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<h3 id="objects"><a href="#objects" class="headerlink" title="objects"></a>objects</h3><p>突然插点题外话，对于 Python 来说，<strong>万物皆对象</strong><br>就比如说，数字4就是一个对象，它具有对象的性质，即具有<code>arrtibute</code>和<code>method</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">12</span></span><br><span class="line">print(x.imag)</span><br><span class="line"></span><br><span class="line">c = <span class="number">12</span> + <span class="number">3j</span></span><br><span class="line">print(c.imag)</span><br><span class="line"></span><br><span class="line">x.bit_length()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">3.0</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<p>我们来观察一下上述三个输出，<code>imag</code>是输出一个数的虚数部分，而<code>c = 12 = 3j</code>则是定义一个虚数的正确方式，<code>x.bit_length()</code>则是输出这个数字的二进制长度，12的二进制是1100，有四位。</p>
<p><strong>tips</strong>   <code>help()</code>对<code>arrtibute</code>和<code>method</code>依然生效，可以使用类似<code>help(x.bit_length())</code>的方式调用，</p>
<p>我为什么突然介绍起 object 呢？ 因为接下来将介绍 list 作为 object 的表现。</p>
<h3 id="List-methods"><a href="#List-methods" class="headerlink" title="List methods"></a>List methods</h3><p><code>list.append</code> modifies a list by adding an item to the end:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Pluto is a planet darn it!</span></span><br><span class="line">planets.append(<span class="string">'Pluto'</span>)</span><br></pre></td></tr></table></figure>
<p><code>list.pop</code> remove and returns the last element of a list:   <del>似曾相识的操作</del></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">planets.pop()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;Plutos&apos;</span><br></pre></td></tr></table></figure>
<p><code>list.index</code>返回元素的下标<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">planets.index(<span class="string">'Earth'</span>)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>
<p>接下来再看神奇的成员运算符<code>in</code>and<code>not in</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'Earth'</span> <span class="keyword">in</span> planets</span><br><span class="line"><span class="string">'Earth'</span> <span class="keyword">not</span> <span class="keyword">in</span> planets</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">True</span><br><span class="line">False</span><br></pre></td></tr></table></figure>
<p>最后，用<code>help(planets)</code>就能获得所有你还想知道的知识啦！赶快去试试吧~</p>
<h3 id="Tuples-元组"><a href="#Tuples-元组" class="headerlink" title="Tuples(元组)"></a>Tuples(元组)</h3><p>Tuples are almost exactly the same as lists.They differ in just two ways.</p>
<ol>
<li>The Syntax for creating them uses parentheses instead of square brackets.</li>
<li>They cannot be modified(they are immutable).</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">t[<span class="number">0</span>] = <span class="number">100</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">TypeError                                 Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input-6-ca3b752cda23&gt; in &lt;module&gt;</span><br><span class="line">      1 t = (1, 2, 3)</span><br><span class="line">----&gt; 2 t[0] = 100</span><br><span class="line"></span><br><span class="line">TypeError: &apos;tuple&apos; object does not support item assignment</span><br></pre></td></tr></table></figure>
<p>Tuples are often used for functions that have multiple return values.</p>
<p>For example, the <code>as_integer_ratio()</code> method of float objects returns a numerator and a denominator in the form of a tuple:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">0.125</span></span><br><span class="line">x.as_integer_ratio()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0.125</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.kesisour.work/2019/07/26/主席树-再探线段树/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kesisour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小宸工作站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/26/主席树-再探线段树/" itemprop="url">"主席树(再探线段树)"</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-26T15:11:23+08:00">
                2019-07-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/07/26/主席树-再探线段树/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://www.kesisour.work/2019/07/26/主席树-再探线段树/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  834
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>好了我终于又想起来我是一名辣鸡ACMer了，今天来继续更新数据结构。</p>
<p>主席树(presistent segment tree)，又名可持久化线段树、动态开点线段树、权值线段树、<del>可持久化柠檬树</del></p>
<p>要想搞明白这是个啥，我给你提供<a href="https://oi-wiki.org/ds/persistent-seg/" target="_blank" rel="noopener">oi-wiki链接</a>，反正我是觉得我说不明白这么复杂的玩意。</p>
<p>先惯例上版子：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> numm ch-48</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pd putchar(<span class="meta-string">' '</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pn putchar(<span class="meta-string">'\n'</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mid (l + r) &gt;&gt; 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fre1 freopen(<span class="meta-string">"1.txt"</span>,<span class="meta-string">"r"</span>,stdin)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fre2 freopen(<span class="meta-string">"2.txt"</span>,<span class="meta-string">"w"</span>,stdout)</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> ll;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(T&amp; res)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">bool</span> flag = <span class="literal">false</span>; <span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch = getchar())) (ch == <span class="string">'-'</span>) &amp;&amp; (flag = <span class="literal">true</span>);</span><br><span class="line">	<span class="keyword">for</span> (res = numm; <span class="built_in">isdigit</span>(ch = getchar()); res = (res &lt;&lt; <span class="number">1</span>) + (res &lt;&lt; <span class="number">3</span>) + numm);</span><br><span class="line">	flag &amp;&amp; (res = -res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(T x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (x &lt; <span class="number">0</span>) <span class="built_in">putchar</span>(<span class="string">'-'</span>), x = -x;</span><br><span class="line">	<span class="keyword">if</span> (x &gt; <span class="number">9</span>) write(x / <span class="number">10</span>);</span><br><span class="line">	<span class="built_in">putchar</span>(x % <span class="number">10</span> + <span class="string">'0'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">200010</span>;</span><br><span class="line"><span class="keyword">int</span> n, q, m, cnt = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> a[N], b[N], T[N];</span><br><span class="line"><span class="keyword">int</span> sum[N &lt;&lt; <span class="number">5</span>], L[N &lt;&lt; <span class="number">5</span>], R[N &lt;&lt; <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">getid</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> &amp;val)</span>  <span class="comment">//离散化</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> lower_bound(b + <span class="number">1</span>, b + m + <span class="number">1</span>, val) - b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> rt = ++cnt;</span><br><span class="line">	sum[rt] = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span> (l &lt; r) &#123;</span><br><span class="line">		L[rt] = build(<span class="number">1</span>, mid);</span><br><span class="line">		R[rt] = build(mid + <span class="number">1</span>, r);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> rt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> pre, <span class="keyword">int</span> l, <span class="keyword">int</span> r,<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> rt = ++cnt;</span><br><span class="line">	L[rt] = L[pre]; R[rt] = R[pre]; sum[rt] = sum[pre] + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span> (l &lt; r) &#123;</span><br><span class="line">		<span class="keyword">if</span> (x &lt;= mid) L[rt] = update(L[pre], <span class="number">1</span>, mid, x);</span><br><span class="line">		<span class="keyword">else</span> R[rt] = update(R[pre], mid + <span class="number">1</span>, r, x);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> rt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span> l;</span><br><span class="line">	<span class="keyword">int</span> x = sum[L[v]] - sum[L[u]];</span><br><span class="line">	<span class="keyword">if</span> (x &gt;= k) <span class="keyword">return</span> query(L[u], L[v], <span class="number">1</span>, mid, k);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> query(R[u], R[v], mid + <span class="number">1</span>, r, k - x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	read(n); read(q);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">		read(a[i]);</span><br><span class="line">		b[i] = a[i];</span><br><span class="line">	&#125;</span><br><span class="line">	sort(b + <span class="number">1</span>, b + <span class="number">1</span> + n);</span><br><span class="line">	m = unique(b + <span class="number">1</span>, b + <span class="number">1</span> + n) - b - <span class="number">1</span>;</span><br><span class="line">	T[<span class="number">0</span>] = build(<span class="number">1</span>, m);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">		<span class="keyword">int</span> t = getid(a[i]);</span><br><span class="line">		T[i] = update(T[i - <span class="number">1</span>], <span class="number">1</span>, m, t);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span> (q--) &#123;</span><br><span class="line">		<span class="keyword">int</span> x, y, z;</span><br><span class="line">		read(x); read(y); read(z);</span><br><span class="line">		<span class="keyword">int</span> t = query(T[x - <span class="number">1</span>], T[y], <span class="number">1</span>, m, z);</span><br><span class="line">		<span class="keyword">while</span> (b[t]); pn;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述板子是<a href="https://www.luogu.org/problemnew/show/P2617" target="_blank" rel="noopener">洛谷版子题</a>的题解。</p>
<p>由于主席树比较复杂，我在这里简单解释一下思路，（这样我以后来粘的时候还方便一点23333）</p>
<p><code>a[]</code>和<code>b[]</code>是来保存最初的数组的，传入值后对<code>b[]</code>进行排序去重(离散化)。</p>
<p><strong>一个很重要的概念，L，R，T 三个数组保存的内容全都是下标：</strong></p>
<p><code>L[]</code>和<code>R[]</code>用来存储左右子树的下标，比如<code>L[x]</code>即为标号为<code>x</code>的结点的左子树标号为<code>L[x]</code></p>
<p>由于主席树实际上是根据插入 n 个点形成 n 个权值线段树，所以用数组<code>T[]</code>来保存每次新线段树的根节点下标</p>
<p><code>build()</code>函数递归建树，变量<code>rt</code>表示当前下标(注：因为采取动态开点的方式，实际上每开一个点就是在已开的数组末尾再开一个，实际存储结构与逻辑结构没关系，并不是堆存储那种)</p>
<p><code>getid()</code>用来获取某个值在<code>b[]</code>中的下标位置，即离散化后的顺序</p>
<p><code>sum[]</code>数组用来存放前缀元素的个数，即<code>sum[x]</code>表示从</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.kesisour.work/2019/07/25/Python-for-Data-Science(1)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kesisour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小宸工作站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/25/Python-for-Data-Science(1)/" itemprop="url">"Python for Data Science(1)"</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-25T23:03:29+08:00">
                2019-07-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/data-science/" itemprop="url" rel="index">
                    <span itemprop="name">data science</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/07/25/Python-for-Data-Science(1)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://www.kesisour.work/2019/07/25/Python-for-Data-Science(1)/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  5
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>好的我又来挖坑了嘿嘿 <del>喂喂你说好的更新数据结构呢？主席树啥时候能出来啊</del></p>
<p>本文是基于 Kaggle 上的 Python 在数据科学里面的应用入门课的<strong>学习笔记性质的博文</strong>，实际写作过程也是一边学一边写的，所以有所偏颇或遗漏的地方欢迎评论指正<del>喂喂你给你的blog载入评论模块了嘛</del><br>由于我是具有一定编程基础的，所以并不会过多的介绍 code 逻辑思想，本文可能更适合已经掌握至少一门编程语言的读者。</p>
<h2 id="1-Numbers-and-arithmetic-in-Python"><a href="#1-Numbers-and-arithmetic-in-Python" class="headerlink" title="1. Numbers and arithmetic in Python"></a>1. Numbers and arithmetic in Python</h2><h3 id="基础操作符"><a href="#基础操作符" class="headerlink" title="基础操作符"></a>基础操作符</h3><table>
<thead>
<tr>
<th>Operator</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>a + b</code></td>
<td>Addition</td>
<td>Sum of <code>a</code> and <code>b</code></td>
</tr>
<tr>
<td><code>a - b</code></td>
<td>Subtraction</td>
<td>Difference of <code>a</code> and <code>b</code></td>
</tr>
<tr>
<td><code>a * b</code></td>
<td>Multiplication</td>
<td>Product of <code>a</code> and <code>b</code></td>
</tr>
<tr>
<td><code>a / b</code></td>
<td>True division</td>
<td>Quotient of <code>a</code> and <code>b</code></td>
</tr>
<tr>
<td><code>a // b</code></td>
<td>Floor division</td>
<td>Quotient of <code>a</code> and <code>b</code>, removing fractional parts</td>
</tr>
<tr>
<td><code>a % b</code></td>
<td>Modulus</td>
<td>Integer remainder after division of <code>a</code> by <code>b</code></td>
</tr>
<tr>
<td><code>a ** b</code></td>
<td>Exponentiation</td>
<td><code>a</code> raised to the power of <code>b</code></td>
</tr>
<tr>
<td><code>-a</code></td>
<td>Negation</td>
<td>The negative of <code>a</code></td>
</tr>
</tbody>
</table>
<p>基本都跟 c++ 类似哈，唯一不同的就是这个 / 和 // ，其中 // 是 floor vivision(即与 c++ 中的 / 一致，抹去小数位)，而 / 是 ture division(保留小数位)。</p>
<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips:"></a>Tips:</h3><p><code>abs(num)</code>是求 num 的绝对值，对 int 和 float 生效</p>
<p><code>int(&#39;807&#39;)</code>是转换数据类型(必须严格遵守格式，如果int(‘1.2’)则会报错)</p>
<p>简单介绍一下Python中的数据类型：</p>
<blockquote>
<p>Python3 中有六个标准的数据类型：</p>
<p>Number（数字）<br>String（字符串）<br>List（列表）<br>Tuple（元组）<br>Set（集合）<br>Dictionary（字典）</p>
<p>Python3 的六个标准数据类型中：</p>
<p>不可变数据（3 个）：Number（数字）、String（字符串）、Tuple（元组）；<br>可变数据（3 个）：List（列表）、Dictionary（字典）、Set（集合）。</p>
</blockquote>
<h2 id="2-Functions-and-Getting-Help"><a href="#2-Functions-and-Getting-Help" class="headerlink" title="2. Functions and Getting Help"></a>2. Functions and Getting Help</h2><h3 id="def创建函数"><a href="#def创建函数" class="headerlink" title="def创建函数"></a>def创建函数</h3><p>先来演示一下Python怎么创建函数；</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 无参无返回值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_kesisour</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"kesisour"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 无参有返回值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">return_kesisour</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"kesisour"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 有参无返回值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_name</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(name)</span><br></pre></td></tr></table></figure>
<p>上面利用<code>def</code>关键字创建了三个最基本的函数，函数在无返回的时候返回值为<code>None</code>(This is similar to the concept of “null” in other languages.)</p>
<h3 id="Getting-Help"><a href="#Getting-Help" class="headerlink" title="Getting Help"></a>Getting Help</h3><p>Python里面内置了一个非常人性化的函数<code>help</code>，用它可以查看函数的函数头，撰写了docstring的函数还可以显示docstring，赶紧来实战一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我 问 我 自 己</span></span><br><span class="line">help(help)</span><br></pre></td></tr></table></figure>
<p>output(以后默认code后面的即为输出，不再标志):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Help on _Helper in module _sitebuiltins object:</span><br><span class="line"></span><br><span class="line">class _Helper(builtins.object)</span><br><span class="line"> |  Define the builtin &apos;help&apos;.</span><br><span class="line"> |  </span><br><span class="line"> |  This is a wrapper around pydoc.help that provides a helpful message</span><br><span class="line"> |  when &apos;help&apos; is typed at the Python interactive prompt.</span><br><span class="line"> |  </span><br><span class="line"> |  Calling help() at the Python prompt starts an interactive help session.</span><br><span class="line"> |  Calling help(thing) prints help for the python object &apos;thing&apos;.</span><br><span class="line"> |  </span><br><span class="line"> |  Methods defined here:</span><br><span class="line"> |  </span><br><span class="line"> |  __call__(self, *args, **kwds)</span><br><span class="line"> |      Call self as a function.</span><br><span class="line"> |  </span><br><span class="line"> |  __repr__(self)</span><br><span class="line"> |      Return repr(self).</span><br><span class="line"> |  </span><br><span class="line"> |  ----------------------------------------------------------------------</span><br><span class="line"> |  Data descriptors defined here:</span><br><span class="line"> |  </span><br><span class="line"> |  __dict__</span><br><span class="line"> |      dictionary for instance variables (if defined)</span><br><span class="line"> |  </span><br><span class="line"> |  __weakref__</span><br><span class="line"> |      list of weak references to the object (if defined)</span><br></pre></td></tr></table></figure></p>
<p>好了我用上面这个例子除了演示一下<code>help</code>的用法之外，也是为了证明一件事，<code>help</code>本身也是一个函数。有关<code>help</code>的用法在这里也不再演示了，读者可以在日常使用过程中自行尝试。</p>
<h3 id="Default-arguments"><a href="#Default-arguments" class="headerlink" title="Default arguments"></a>Default arguments</h3><p>首先我们来<code>help(print)</code>看一下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Help on built-in function print in module builtins:</span><br><span class="line"></span><br><span class="line">print(...)</span><br><span class="line">    print(value, ..., sep=&apos; &apos;, end=&apos;\n&apos;, file=sys.stdout, flush=False)</span><br><span class="line">    </span><br><span class="line">    Prints the values to a stream, or to sys.stdout by default.</span><br><span class="line">    Optional keyword arguments:</span><br><span class="line">    file:  a file-like object (stream); defaults to the current sys.stdout.</span><br><span class="line">    sep:   string inserted between values, default a space.</span><br><span class="line">    end:   string appended after the last value, default a newline.</span><br><span class="line">    flush: whether to forcibly flush the stream.</span><br></pre></td></tr></table></figure></p>
<p>发现了吗？print除了传入的变量之外，还有四个内置的参数，如果不设置他们的值，他们的值就是默认的，这种就称为 default arguments(默认参数)</p>
<p>来看一下用法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">print(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, sep = <span class="string">"&lt;"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 2 3</span><br><span class="line">1&lt;2&lt;3</span><br></pre></td></tr></table></figure>
<p><code>sep</code>默认为空格，但如果自行定义的话，则会覆盖掉原本的空格。</p>
<p>如何在自己设置的函数中创建default arguments：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">greet</span><span class="params">(who=<span class="string">"Colin"</span>)</span>:</span></span><br><span class="line">    print(<span class="string">"Hello,"</span>, who)</span><br><span class="line">    </span><br><span class="line">greet()</span><br><span class="line">greet(who=<span class="string">"Kaggle"</span>)</span><br><span class="line"><span class="comment"># (In this case, we don't need to specify the name of the argument, because it's unambiguous.)</span></span><br><span class="line">greet(<span class="string">"world"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hello, Colin</span><br><span class="line">Hello, Kaggle</span><br><span class="line">Hello, world</span><br></pre></td></tr></table></figure>
<h3 id="Functions-Applied-to-Functions"><a href="#Functions-Applied-to-Functions" class="headerlink" title="Functions Applied to Functions"></a>Functions Applied to Functions</h3><p>Higher order functions 使用演示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">def mult_by_five(x):</span><br><span class="line">    return 5 * x</span><br><span class="line"></span><br><span class="line">def call(fn, arg):</span><br><span class="line">    &quot;&quot;&quot;Call fn on arg&quot;&quot;&quot;</span><br><span class="line">    return fn(arg)</span><br><span class="line"></span><br><span class="line">def squared_call(fn, arg):</span><br><span class="line">    &quot;&quot;&quot;Call fn on the result of calling fn on arg&quot;&quot;&quot;</span><br><span class="line">    return fn(fn(arg))</span><br><span class="line"></span><br><span class="line">print(</span><br><span class="line">    call(mult_by_five, 1),</span><br><span class="line">    squared_call(mult_by_five, 1), </span><br><span class="line">    sep=&apos;\n&apos;, # &apos;\n&apos; is the newline character - it starts a new line</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">25</span><br></pre></td></tr></table></figure>
<p>这对于有编程基础的读者来说非常简单吧，只需要记一下写法即可，接下来来演示一个有意思的东西：<br>先来看一下<code>help(max)</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Help on built-in function max in module builtins:</span><br><span class="line"></span><br><span class="line">max(...)</span><br><span class="line">    max(iterable, *[, default=obj, key=func]) -&gt; value</span><br><span class="line">    max(arg1, arg2, *args, *[, key=func]) -&gt; value</span><br><span class="line">    </span><br><span class="line">    With a single iterable argument, return its biggest item. The</span><br><span class="line">    default keyword-only argument specifies an object to return if</span><br><span class="line">    the provided iterable is empty.</span><br><span class="line">    With two or more arguments, return the largest argument.</span><br></pre></td></tr></table></figure></p>
<p>有一个<code>key</code>关键字，可以自己定义：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mod_5</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="string">"""Return the remainder of x after dividing by 5"""</span></span><br><span class="line">    <span class="keyword">return</span> x % <span class="number">5</span></span><br><span class="line"></span><br><span class="line">print(</span><br><span class="line">    <span class="string">'Which number is biggest?'</span>,</span><br><span class="line">    max(<span class="number">100</span>, <span class="number">51</span>, <span class="number">14</span>),</span><br><span class="line">    <span class="string">'Which number is the biggest modulo 5?'</span>,</span><br><span class="line">    max(<span class="number">100</span>, <span class="number">51</span>, <span class="number">14</span>, key=mod_5),</span><br><span class="line">    sep=<span class="string">'\n'</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Which number is biggest?</span><br><span class="line">100</span><br><span class="line">Which number is the biggest modulo 5?</span><br><span class="line">14</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.kesisour.work/2019/07/21/线段树初探/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kesisour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小宸工作站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/21/线段树初探/" itemprop="url">"线段树初探"</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-21T16:00:33+08:00">
                2019-07-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/07/21/线段树初探/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://www.kesisour.work/2019/07/21/线段树初探/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.6k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  8
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>好了，我在昨天的练习赛中备受打击<del>孔乙己你是不是又爆零了</del>，果然还是要一步一个脚印，从基础的数据结构一点一点补起。</p>
<p>说起来，这并不是我第一次写线段树了，然鹅这个东西他不过脑啊2333333还是要把东西整理下来，总结一个个板子这样下次再想用的时候<del>直接复制就好啦</del>也能迅速上手。</p>
<h2 id="线段树简介-amp-实现"><a href="#线段树简介-amp-实现" class="headerlink" title="线段树简介&amp;实现"></a>线段树简介&amp;实现</h2><p><a href="https://baike.baidu.com/item/%E7%BA%BF%E6%AE%B5%E6%A0%91/10983506?fr=aladdin" target="_blank" rel="noopener">线段树(Segment Tree)的具体定义自己百度去</a></p>
<p>来简单介绍下segment tree的实现方式，首先开个数组<code>a[n]</code>来进行数据的存储，然后用一个4n大小的数组<code>st[4n]</code>来进行segment tree的存储(为啥开4n网上有很多现成的证明，自己去搜)，线段树的具体建立方式是<code>st[p] = st[2 * p] + st[2 * p + 1]</code>,用一个函数递归建立即可，如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t, <span class="keyword">int</span> p)</span> </span>&#123; <span class="comment">//建树</span></span><br><span class="line">	<span class="keyword">if</span> (s == t) &#123;</span><br><span class="line">		st[p] = a[s];</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> m = (s + t) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	build(s, m, LS(p)), build(m + <span class="number">1</span>, t, RS(p));</span><br><span class="line">	st[p] = st[LS(p)] + st[RS(p)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>是不是非常简单呢?<del>你是不是忘了自己被线段树折磨成啥样子了</del></p>
<p>然后建立lazy数组<code>lazy[4n]</code>进行lazy操作，具体解释<a href="https://oi-wiki.org/ds/segment/" target="_blank" rel="noopener">参见oi-wiki</a>，然后再写写update，getsum，一个最简易的线段树就出来了呢<del>~<br>~~史上最简洁线段树介绍Over</del></p>
<p>以我写博客的懒散风格，直接上我撸的板子<del>这真是怠惰呢</del></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> numm ch-48</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pd putchar(<span class="meta-string">' '</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pn putchar(<span class="meta-string">'\n'</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fre1 freopen(<span class="meta-string">"1.txt"</span>,<span class="meta-string">"r"</span>,stdin)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fre2 freopen(<span class="meta-string">"2.txt"</span>,<span class="meta-string">"w"</span>,stdout)</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> ll;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(T&amp; res)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">bool</span> flag = <span class="literal">false</span>; <span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch = getchar())) (ch == <span class="string">'-'</span>) &amp;&amp; (flag = <span class="literal">true</span>);</span><br><span class="line">	<span class="keyword">for</span> (res = numm; <span class="built_in">isdigit</span>(ch = getchar()); res = (res &lt;&lt; <span class="number">1</span>) + (res &lt;&lt; <span class="number">3</span>) + numm);</span><br><span class="line">	flag &amp;&amp; (res = -res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(T x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (x &lt; <span class="number">0</span>) <span class="built_in">putchar</span>(<span class="string">'-'</span>), x = -x;</span><br><span class="line">	<span class="keyword">if</span> (x &gt; <span class="number">9</span>) write(x / <span class="number">10</span>);</span><br><span class="line">	<span class="built_in">putchar</span>(x % <span class="number">10</span> + <span class="string">'0'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LS(a) (a &lt;&lt; 1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RS(a) (a &lt;&lt; 1 | 1)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e6</span>;</span><br><span class="line"></span><br><span class="line">ll a[maxn], st[<span class="number">4</span> * maxn];</span><br><span class="line">ll lazy[<span class="number">4</span> * maxn] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t, <span class="keyword">int</span> p)</span> </span>&#123; <span class="comment">//建树</span></span><br><span class="line">	<span class="keyword">if</span> (s == t) &#123;</span><br><span class="line">		st[p] = a[s];</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> m = (s + t) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	build(s, m, LS(p)), build(m + <span class="number">1</span>, t, RS(p));</span><br><span class="line">	st[p] = st[LS(p)] + st[RS(p)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">down</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> s, <span class="keyword">int</span> t, <span class="keyword">int</span> p)</span> </span>&#123; <span class="comment">//下放函数</span></span><br><span class="line">	<span class="keyword">int</span> m = (s + t) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	st[LS(p)] += lazy[p] * (m - s + <span class="number">1</span>);</span><br><span class="line">	st[RS(p)] += lazy[p] * (t - m);</span><br><span class="line">	lazy[LS(p)] += lazy[p];</span><br><span class="line">	lazy[RS(p)] += lazy[p];</span><br><span class="line">	lazy[p] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> c, <span class="keyword">int</span> s, <span class="keyword">int</span> t, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (l &lt;= s &amp;&amp; r &gt;= t) &#123;</span><br><span class="line">		st[p] += (t - s + <span class="number">1</span>) * c;</span><br><span class="line">		lazy[p] += c;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (lazy[p]) down(l, r, s, t, p);</span><br><span class="line">	<span class="keyword">int</span> m = (s + t) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span> (l &lt;= m) update(l, r, c, s, m, LS(p));</span><br><span class="line">	<span class="keyword">if</span>(r &gt; m) update(l, r, c, m + <span class="number">1</span>, t, RS(p));</span><br><span class="line">	st[p] = st[LS(p)] + st[RS(p)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">getsum</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> s, <span class="keyword">int</span> t, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (l &lt;= s &amp;&amp; r &gt;= t) <span class="keyword">return</span> st[p];</span><br><span class="line">	<span class="keyword">if</span>(lazy[p]) down(l, r, s, t, p);</span><br><span class="line">	<span class="keyword">int</span> m = (s + t) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	ll sum = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span> (l &lt;= m) sum = getsum(l, r, s, m, LS(p));</span><br><span class="line">	<span class="keyword">if</span> (r &gt; m) sum += getsum(l, r, m + <span class="number">1</span>, t, RS(p));</span><br><span class="line">	<span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n, m;</span><br><span class="line">	read(n); read(m);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">		read(a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	build(<span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> flag;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">		read(flag);</span><br><span class="line">		<span class="keyword">if</span> (flag == <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">int</span> x, y, k;</span><br><span class="line">			read(x); read(y); read(k);</span><br><span class="line">			update(x, y, k, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">int</span> x, y;</span><br><span class="line">			read(x); read(y);</span><br><span class="line">			write(getsum(x, y, <span class="number">1</span>, n, <span class="number">1</span>)); pn;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上的板子是洛谷上一道板子题的题解：<a href="https://www.luogu.org/problemnew/show/P3372" target="_blank" rel="noopener">P3372 【模板】线段树 1</a></p>
<p>然后是我摘的一个有multiply操作的线段树，代码如下：<br><strong>注意，乘法的lazy操作需要另外建立一个lazy数组，且乘法lazy数组的初始状态均为1</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sea 100010</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> left l,mid,k&lt;&lt;1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> right mid+1,r,k&lt;&lt;1|1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lef k&lt;&lt;1 </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rig k&lt;&lt;1|1</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,p,s,x,y;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> sum[sea*<span class="number">4</span>],kk,lazy_ad[sea*<span class="number">4</span>],lazy_mu[sea*<span class="number">4</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> s=<span class="number">0</span>,w=<span class="number">1</span>; <span class="keyword">char</span> ch=getchar();</span><br><span class="line">	<span class="keyword">while</span>(ch&lt;<span class="string">'0'</span>||ch&gt;<span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)w=<span class="number">-1</span>; ch=getchar();&#125;</span><br><span class="line">	<span class="keyword">while</span>(ch&lt;=<span class="string">'9'</span>&amp;&amp;ch&gt;=<span class="string">'0'</span>) s=s*<span class="number">10</span>+ch-<span class="string">'0'</span>,ch=getchar();</span><br><span class="line">	<span class="keyword">return</span> s*w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> LL <span class="title">read_ll</span><span class="params">()</span><span class="comment">//傻掉的我自己，为什么不用scanf~~~(算了不改了)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	LL s=<span class="number">0</span>,w=<span class="number">1</span>; <span class="keyword">char</span> ch=getchar();</span><br><span class="line">	<span class="keyword">while</span>(ch&lt;<span class="string">'0'</span>||ch&gt;<span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)w=<span class="number">-1</span>; ch=getchar();&#125;</span><br><span class="line">	<span class="keyword">while</span>(ch&lt;=<span class="string">'9'</span>&amp;&amp;ch&gt;=<span class="string">'0'</span>) s=s*<span class="number">10</span>+ch-<span class="string">'0'</span>,ch=getchar();</span><br><span class="line">	<span class="keyword">return</span> s*w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k)</span><span class="comment">//建树</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	lazy_mu[k]=<span class="number">1</span>;<span class="comment">//乘最初为一</span></span><br><span class="line">	<span class="keyword">if</span>(l==r) sum[k]=read_ll();</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		build(left); build(right);</span><br><span class="line">		sum[k]=(sum[lef]+sum[rig])%p;<span class="comment">//</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k,LL a,LL b)</span><span class="comment">//标记</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	lazy_ad[k]=(lazy_ad[k]*b+a)%p;</span><br><span class="line">	lazy_mu[k]=(lazy_mu[k]*b)%p;</span><br><span class="line">	sum[k]=(sum[k]*b+(r-l+<span class="number">1</span>)*a)%p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">down</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k)</span><span class="comment">//下放</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">	push(left,lazy_ad[k],lazy_mu[k]);</span><br><span class="line">	push(right,lazy_ad[k],lazy_mu[k]);</span><br><span class="line">	lazy_ad[k]=<span class="number">0</span>;	lazy_mu[k]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">midefy</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k,LL a,LL b)</span><span class="comment">//加乘一块用了</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y) 	push(l,r,k,a,b);</span><br><span class="line">	elsstation</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(lazy_ad[k]!=<span class="number">0</span>||lazy_mu[k]!=<span class="number">1</span>) down(l,r,k);</span><br><span class="line">		<span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(x&lt;=mid) midefy(left,a,b);</span><br><span class="line">		<span class="keyword">if</span>(y&gt;mid) midefy(right,a,b);</span><br><span class="line">		sum[k]=(sum[lef]+sum[rig])%p;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">ask</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k)</span><span class="comment">//询问</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(x&lt;=l&amp;&amp;r&lt;=y) 	<span class="keyword">return</span> sum[k];</span><br><span class="line">	<span class="keyword">if</span>(lazy_ad[k]!=<span class="number">0</span>||lazy_mu[k]!=<span class="number">1</span>) down(l,r,k);</span><br><span class="line">	<span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">	LL ans=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span>(x&lt;=mid) ans=(ans+ask(left))%p;</span><br><span class="line">	<span class="keyword">if</span>(y&gt;mid) ans=(ans+ask(right))%p;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	n=read(); m=read(); p=read(); </span><br><span class="line">	build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">while</span>(m--)</span><br><span class="line">	&#123;</span><br><span class="line">		s=read();</span><br><span class="line">		<span class="keyword">if</span>(s==<span class="number">1</span>)<span class="comment">//区间加</span></span><br><span class="line">		&#123;</span><br><span class="line">			x=read(); y=read(); kk=read_ll(); </span><br><span class="line">			midefy(<span class="number">1</span>,n,<span class="number">1</span>,<span class="number">0</span>,kk);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(s==<span class="number">2</span>)<span class="comment">//区间乘</span></span><br><span class="line">		&#123;</span><br><span class="line">			x=read(); y=read(); kk=read_ll(); </span><br><span class="line">			midefy(<span class="number">1</span>,n,<span class="number">1</span>,kk,<span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span><span class="comment">//询问</span></span><br><span class="line">		&#123;</span><br><span class="line">			x=read(); y=read(); </span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ask(<span class="number">1</span>,n,<span class="number">1</span>));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的code对应另一道板子题<a href="https://www.luogu.org/problemnew/show/P3373" target="_blank" rel="noopener">P3373 【模板】线段树 2</a></p>
<p>好啦~最近可能会多更一些数据结构的题，先把数据结构都补完，才能在竞赛中有一点点立足之本，小宸绝对不自闭。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.kesisour.work/2019/07/18/笛卡尔树及比较方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kesisour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小宸工作站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/18/笛卡尔树及比较方法/" itemprop="url">"笛卡尔树及比较方法"</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-18T22:26:13+08:00">
                2019-07-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/07/18/笛卡尔树及比较方法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://www.kesisour.work/2019/07/18/笛卡尔树及比较方法/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  6
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>（片头注：本文实为边学边写的学习笔记，可能存在逻辑不连贯或<del>突然顿悟</del>等现象，想获得更好的学习体验的朋友可以移步更为成熟的博文）</p>
<h2 id="笛卡尔树定义"><a href="#笛卡尔树定义" class="headerlink" title="笛卡尔树定义"></a>笛卡尔树定义</h2><p>笛卡尔树是一个很有意思的树形结构，因为它同时满足两个性质，从key（key就是索引位置，如下图中9的key为1，3的key为2……）来看，满足二叉搜索树的特性，从value来看，满足堆的性质。<br><img src="/2019/07/18/笛卡尔树及比较方法/笛卡尔树.png"></p>
<h2 id="笛卡尔树的构造"><a href="#笛卡尔树的构造" class="headerlink" title="笛卡尔树的构造"></a>笛卡尔树的构造</h2><ol>
<li><p>从第一个元素开始，从左往右遍历数组L</p>
</li>
<li><p>将元素L[0]作为树的根节点R</p>
</li>
<li><p>for i in [a[1], a[2]…a[n]]</p>
</li>
<li><p>如果a[i]小于根节点R，则将a[i]作为根节点R的父节点</p>
</li>
<li><p>如果a[i]大于根节点R，则将a[i]从根节点的右节点开始寻找位置</p>
</li>
<li><p>从右寻找的逻辑同根节点的对比方法</p>
</li>
</ol>
<p>下面是具体的构造code：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node_s</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">node_s</span>* <span class="title">l</span>;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">node_s</span>* <span class="title">r</span>;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">node_s</span>* <span class="title">p</span>;</span></span><br><span class="line">	<span class="keyword">int</span> v;</span><br><span class="line">&#125;<span class="keyword">node_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">tree_s</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">node_t</span>* root;</span><br><span class="line">&#125;<span class="keyword">tree_t</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">node_t</span>* node_create(<span class="keyword">node_t</span>* p, <span class="keyword">int</span> v)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">node_t</span>* n = (<span class="keyword">node_t</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">node_t</span>));</span><br><span class="line">	<span class="built_in">memset</span>(n, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">node_t</span>));</span><br><span class="line">	n-&gt;v = v;</span><br><span class="line">	n-&gt;p = p;</span><br><span class="line">	<span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">tree_t</span>* tree_create()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">tree_t</span>* t = (<span class="keyword">tree_t</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">tree_t</span>));</span><br><span class="line">	<span class="built_in">memset</span>(t, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">tree_t</span>));</span><br><span class="line">	<span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tree_insert_n</span><span class="params">(<span class="keyword">node_t</span>* root, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//当前节点比根节点小，则转换为根节点</span></span><br><span class="line">	<span class="keyword">if</span> (v &lt; root-&gt;v) &#123;</span><br><span class="line">		<span class="keyword">node_t</span>* n = node_create(root-&gt;p, v);</span><br><span class="line">		root-&gt;p-&gt;r = n;</span><br><span class="line">		root-&gt;p = n;</span><br><span class="line">		n-&gt;l = root;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">//如果右子树不存在，直接放置</span></span><br><span class="line">		<span class="keyword">if</span> (root-&gt;r == <span class="number">0</span>) &#123;</span><br><span class="line">			root-&gt;r = node_create(root, v);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//当前的节点比根节点大，则从根节点的右子树开始查找</span></span><br><span class="line">		tree_insert_n(root-&gt;r, v);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tree_insert</span><span class="params">(<span class="keyword">tree_t</span>* t, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (t-&gt;root == <span class="number">0</span>) &#123;</span><br><span class="line">		t-&gt;root = node_create(<span class="number">0</span>, v);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//当前节点比根节点小，则转换为根节点</span></span><br><span class="line">	<span class="keyword">if</span> (v &lt; t-&gt;root-&gt;v) &#123;</span><br><span class="line">		<span class="keyword">node_t</span>* n = node_create(<span class="number">0</span>, v);</span><br><span class="line">		t-&gt;root-&gt;p = n;</span><br><span class="line">		n-&gt;l = t-&gt;root;</span><br><span class="line">		t-&gt;root = n;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">//如果右子树不存在，直接放置</span></span><br><span class="line">		<span class="keyword">if</span> (t-&gt;root-&gt;r == <span class="number">0</span>) &#123;</span><br><span class="line">			t-&gt;root-&gt;r = node_create(t-&gt;root, v);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//当前的节点比根节点大，则从根节点的右子树开始查找</span></span><br><span class="line">		tree_insert_n(t-&gt;root-&gt;r, v);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tree_print_n</span><span class="params">(<span class="keyword">node_t</span>* n, <span class="keyword">int</span> level, <span class="keyword">char</span> dir)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!n) &#123;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; level; ++i) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"---"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%c--%d\n"</span>, dir, n-&gt;v);</span><br><span class="line">	tree_print_n(n-&gt;l, level + <span class="number">1</span>, <span class="string">'L'</span>);</span><br><span class="line">	tree_print_n(n-&gt;r, level + <span class="number">1</span>, <span class="string">'R'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tree_print</span><span class="params">(<span class="keyword">tree_t</span>* tree)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	tree_print_n(tree-&gt;root, <span class="number">0</span>, <span class="string">'C'</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tree_free</span><span class="params">(<span class="keyword">tree_t</span>* t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n, height;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n), n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> arr[n];</span><br><span class="line"></span><br><span class="line">		<span class="keyword">tree_t</span>* tree = tree_create();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;arr[i]);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			tree_insert(tree, arr[i]);</span><br><span class="line">			tree_print(tree);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		tree_free(tree);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>(当然这个不是重点~需要用的时候自取就好啦~)<br>(<del>我连看都没看直接从别的地方粘贴过来了</del>)</p>
<h2 id="笛卡尔树的应用"><a href="#笛卡尔树的应用" class="headerlink" title="笛卡尔树的应用"></a>笛卡尔树的应用</h2><p>好了接下来切入正题，为什么我今天就跟笛卡尔树过不去了，原因在于下面这道题(来源：2019牛客暑期多校训练营（第一场）A题)：</p>
<blockquote>
<img src="/2019/07/18/笛卡尔树及比较方法/Equivalent_Prefixes.png">
<p><del>这题害我今天下午的训练只做了一道签到题</del>这真是道好题啊</p>
</blockquote>
<p><strong>Sample Input&amp;&amp;Output</strong></p>
<blockquote>
<p>Sample Input<br>2<br>1 2<br>2 1<br>3<br>2 1 3<br>3 1 2<br>5<br>3 1 5 2 4<br>5 2 4 3 1</p>
</blockquote>
<blockquote>
<p>Sample Output:<br>1<br>3<br>4</p>
</blockquote>
<p>从赛后题解看到，这题中<strong>两个数组equivalent等价于两个数组构成的笛卡尔树形状相同</strong>，所以剩下的事就简单了，比较两个数组的笛卡尔树是否相同即可<del>真的简单吗？？？喂！</del><br>下面粘一位大佬的题解：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> numm ch-48</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pd putchar(<span class="meta-string">' '</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pn putchar(<span class="meta-string">'\n'</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fre1 freopen(<span class="meta-string">"1.txt"</span>,<span class="meta-string">"r"</span>,stdin)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fre2 freopen(<span class="meta-string">"2.txt"</span>,<span class="meta-string">"w"</span>,stdout)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">read</span><span class="params">(T&amp; res)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">bool</span> flag = <span class="literal">false</span>; <span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch = getchar())) (ch == <span class="string">'-'</span>) &amp;&amp; (flag = <span class="literal">true</span>);</span><br><span class="line">	<span class="keyword">for</span> (res = numm; <span class="built_in">isdigit</span>(ch = getchar()); res = (res &lt;&lt; <span class="number">1</span>) + (res &lt;&lt; <span class="number">3</span>) + numm);</span><br><span class="line">	flag &amp;&amp; (res = -res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(T x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (x &lt; <span class="number">0</span>) <span class="built_in">putchar</span>(<span class="string">'-'</span>), x = -x;</span><br><span class="line">	<span class="keyword">if</span> (x &gt; <span class="number">9</span>) write(x / <span class="number">10</span>);</span><br><span class="line">	<span class="built_in">putchar</span>(x % <span class="number">10</span> + <span class="string">'0'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm = <span class="number">8000010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[maxn], b[maxn];</span><br><span class="line"><span class="keyword">int</span> MinPosA[maxn], MinA;</span><br><span class="line"><span class="keyword">int</span> MinPosB[maxn], MinB;</span><br><span class="line"><span class="keyword">int</span> q1[maxn], q2[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) != EOF) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">			read(a[i]);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">			read(b[i]);</span><br><span class="line">		<span class="keyword">int</span> head1 = <span class="number">1</span>, tail1 = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">int</span> head2 = <span class="number">1</span>, tail2 = <span class="number">1</span>;</span><br><span class="line">		q1[head1] = q2[head1] = inf;</span><br><span class="line">		<span class="keyword">int</span> pos = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">			<span class="keyword">while</span> (head1 &lt;= tail1 &amp;&amp; q1[tail1] &gt; a[i]) tail1--;</span><br><span class="line">			<span class="keyword">while</span> (head2 &lt;= tail2 &amp;&amp; q2[tail2] &gt; b[i]) tail2--;</span><br><span class="line">			<span class="keyword">if</span> (tail1 != tail2) <span class="keyword">break</span>;</span><br><span class="line">			q1[++tail1] = a[i], q2[++tail2] = b[i];</span><br><span class="line">			pos = i;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		write(pos); pn;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面的题解通过不断遍历比较笛卡尔树的最右路径来判断笛卡尔树的构造，经实测可行，或许下面这种解释更容易懂<del>虽然我没看懂233333</del><br><img src="/2019/07/18/笛卡尔树及比较方法/Equivalent_Prefixes题解.png"><br>就这样吧…这文估计没有人能看明白，我真的好菜啊55555</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.kesisour.work/2019/07/18/C++大数板子/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kesisour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小宸工作站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/18/C++大数板子/" itemprop="url">C++大数板子</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-18T19:28:04+08:00">
                2019-07-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/07/18/C++大数板子/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://www.kesisour.work/2019/07/18/C++大数板子/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.6k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  8
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天在训练的时候发现的很好用的C++大数板子，存一下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 9999</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXSIZE 1010</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DLEN 4</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BigNum</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> x[<span class="number">5000</span>], a[<span class="number">5000</span>], y[<span class="number">5000</span>], b[<span class="number">5000</span>]; <span class="comment">//可以控制大数的位数</span></span><br><span class="line">	<span class="keyword">int</span> len;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	BigNum() &#123; len = <span class="number">1</span>; <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a)); &#125; <span class="comment">//构造函数</span></span><br><span class="line">	BigNum(<span class="keyword">const</span> ll); <span class="comment">//将一个int类型的变量转化成大数</span></span><br><span class="line">	BigNum(<span class="keyword">const</span> <span class="keyword">char</span>*); <span class="comment">//将一个字符串类型的变量转化为大数</span></span><br><span class="line">	BigNum(<span class="keyword">const</span> BigNum&amp;); <span class="comment">//拷贝构造函数</span></span><br><span class="line">	BigNum&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> BigNum&amp;); <span class="comment">//重载赋值运算符，大数之间进行赋值运算</span></span><br><span class="line">	<span class="keyword">friend</span> istream&amp; <span class="keyword">operator</span>&gt;&gt;(istream&amp;, BigNum&amp;); <span class="comment">//重载输入运算符</span></span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp;, BigNum&amp;); <span class="comment">//重载输出运算符</span></span><br><span class="line">	BigNum <span class="keyword">operator</span>+(<span class="keyword">const</span> BigNum&amp;)<span class="keyword">const</span>; <span class="comment">//重载加法运算符，两个大数之间的相加运算</span></span><br><span class="line">	BigNum <span class="keyword">operator</span>-(<span class="keyword">const</span> BigNum&amp;)<span class="keyword">const</span>; <span class="comment">//重载减法运算符，两个大数之间的相减运算</span></span><br><span class="line">	BigNum <span class="keyword">operator</span>*(<span class="keyword">const</span> BigNum&amp;)<span class="keyword">const</span>; <span class="comment">//重载乘法运算符，两个大数之间的相乘运算</span></span><br><span class="line">	BigNum <span class="keyword">operator</span>/(<span class="keyword">const</span> <span class="keyword">int</span>&amp;)<span class="keyword">const</span>; <span class="comment">//重载除法运算符，大数对一个整数进行相除运算</span></span><br><span class="line"></span><br><span class="line">	BigNum <span class="keyword">operator</span>^(<span class="keyword">const</span> <span class="keyword">int</span>&amp;)<span class="keyword">const</span>; <span class="comment">//大数的n次方运算</span></span><br><span class="line">	<span class="keyword">int</span> <span class="keyword">operator</span>%(<span class="keyword">const</span> <span class="keyword">int</span>&amp;)<span class="keyword">const</span>; <span class="comment">//大数对一个int类型的变量进行取模运算</span></span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>&gt;(<span class="keyword">const</span> BigNum&amp; T)<span class="keyword">const</span>; <span class="comment">//大数和另一个大数的大小比较</span></span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>&gt;(<span class="keyword">const</span> <span class="keyword">int</span>&amp; t)<span class="keyword">const</span>; <span class="comment">//大数和一个int类型的变量的大小比较</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>; <span class="comment">//输出大数</span></span><br><span class="line">&#125;;</span><br><span class="line">BigNum::BigNum(<span class="keyword">const</span> ll b) <span class="comment">//将一个int类型的变量转化为大数</span></span><br><span class="line">&#123;</span><br><span class="line">	ll c, d = b;</span><br><span class="line">	len = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">	<span class="keyword">while</span> (d &gt; MAXN)</span><br><span class="line">	&#123;</span><br><span class="line">		c = d - (d / (MAXN + <span class="number">1</span>)) * (MAXN + <span class="number">1</span>);</span><br><span class="line">		d = d / (MAXN + <span class="number">1</span>);</span><br><span class="line">		a[len++] = c;</span><br><span class="line">	&#125;</span><br><span class="line">	a[len++] = d;</span><br><span class="line">&#125;</span><br><span class="line">BigNum::BigNum(<span class="keyword">const</span> <span class="keyword">char</span>* s) <span class="comment">//将一个字符串类型的变量转化为大数</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> t, k, index, L, i;</span><br><span class="line">	<span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">	L = <span class="built_in">strlen</span>(s);</span><br><span class="line">	len = L / DLEN;</span><br><span class="line">	<span class="keyword">if</span> (L % DLEN)len++;</span><br><span class="line">	index = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = L - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i -= DLEN)</span><br><span class="line">	&#123;</span><br><span class="line">		t = <span class="number">0</span>;</span><br><span class="line">		k = i - DLEN + <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span> (k &lt; <span class="number">0</span>)k = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = k; j &lt;= i; j++)</span><br><span class="line">			t = t * <span class="number">10</span> + s[j] - <span class="string">'0'</span>;</span><br><span class="line">		a[index++] = t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">BigNum::BigNum(<span class="keyword">const</span> BigNum&amp; T) :len(T.len) <span class="comment">//拷贝构造函数</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">		a[i] = T.a[i];</span><br><span class="line">&#125;</span><br><span class="line">BigNum&amp; BigNum::<span class="keyword">operator</span>=(<span class="keyword">const</span> BigNum&amp; n) <span class="comment">//重载赋值运算符，大数之间赋值运算</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	len = n.len;</span><br><span class="line">	<span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">		a[i] = n.a[i];</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">istream&amp; <span class="keyword">operator</span>&gt;&gt;(istream&amp; in, BigNum&amp; b)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">char</span> ch[MAXSIZE * <span class="number">4</span>];</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">-1</span>;</span><br><span class="line">	in &gt;&gt; ch;</span><br><span class="line">	<span class="keyword">int</span> L = <span class="built_in">strlen</span>(ch);</span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>, sum = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = L - <span class="number">1</span>; i &gt;= <span class="number">0</span>;)</span><br><span class="line">	&#123;</span><br><span class="line">		sum = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> t = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span> &amp;&amp; i &gt;= <span class="number">0</span>; j++, i--, t *= <span class="number">10</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			sum += (ch[i] - <span class="string">'0'</span>) * t;</span><br><span class="line">		&#125;</span><br><span class="line">		b.a[count] = sum;</span><br><span class="line">		count++;</span><br><span class="line">	&#125;</span><br><span class="line">	b.len = count++;</span><br><span class="line">	<span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, BigNum&amp; b) <span class="comment">//重载输出运算符</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; b.a[b.len - <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span> (i = b.len - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%04d"</span>, b.a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line">BigNum BigNum::<span class="keyword">operator</span>+(<span class="keyword">const</span> BigNum&amp; T)<span class="keyword">const</span> <span class="comment">//两个大数之间的相加运算</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="function">BigNum <span class="title">t</span><span class="params">(*<span class="keyword">this</span>)</span></span>;</span><br><span class="line">	<span class="keyword">int</span> i, big;</span><br><span class="line">	big = T.len &gt; len ? T.len : len;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; big; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		t.a[i] += T.a[i];</span><br><span class="line">		<span class="keyword">if</span> (t.a[i] &gt; MAXN)</span><br><span class="line">		&#123;</span><br><span class="line">			t.a[i + <span class="number">1</span>]++;</span><br><span class="line">			t.a[i] -= MAXN + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (t.a[big] != <span class="number">0</span>)</span><br><span class="line">		t.len = big + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span> t.len = big;</span><br><span class="line">	<span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line">BigNum BigNum::<span class="keyword">operator</span>-(<span class="keyword">const</span> BigNum&amp; T)<span class="keyword">const</span> <span class="comment">//两个大数之间的相减运算</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> i, j, big;</span><br><span class="line">	<span class="keyword">bool</span> flag;</span><br><span class="line">	BigNum t1, t2;</span><br><span class="line">	<span class="keyword">if</span> (*<span class="keyword">this</span> &gt; T)</span><br><span class="line">	&#123;</span><br><span class="line">		t1 = *<span class="keyword">this</span>;</span><br><span class="line">		t2 = T;</span><br><span class="line">		flag = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		t1 = T;</span><br><span class="line">		t2 = *<span class="keyword">this</span>;</span><br><span class="line">		flag = <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	big = t1.len;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; big; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (t1.a[i] &lt; t2.a[i])</span><br><span class="line">		&#123;</span><br><span class="line">			j = i + <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">while</span> (t1.a[j] == <span class="number">0</span>)</span><br><span class="line">				j++;</span><br><span class="line">			t1.a[j--]--;</span><br><span class="line">			<span class="keyword">while</span> (j &gt; i)</span><br><span class="line">				t1.a[j--] += MAXN;</span><br><span class="line">			t1.a[i] += MAXN + <span class="number">1</span> - t2.a[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> t1.a[i] -= t2.a[i];</span><br><span class="line">	&#125;</span><br><span class="line">	t1.len = big;</span><br><span class="line">	<span class="keyword">while</span> (t1.a[len - <span class="number">1</span>] == <span class="number">0</span> &amp;&amp; t1.len &gt; <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		t1.len--;</span><br><span class="line">		big--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (flag)</span><br><span class="line">		t1.a[big - <span class="number">1</span>] = <span class="number">0</span> - t1.a[big - <span class="number">1</span>];</span><br><span class="line">	<span class="keyword">return</span> t1;</span><br><span class="line">&#125;</span><br><span class="line">BigNum BigNum::<span class="keyword">operator</span>*(<span class="keyword">const</span> BigNum&amp; T)<span class="keyword">const</span> <span class="comment">//两个大数之间的相乘</span></span><br><span class="line">&#123;</span><br><span class="line">	BigNum ret;</span><br><span class="line">	<span class="keyword">int</span> i, j, up;</span><br><span class="line">	<span class="keyword">int</span> temp, temp1;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		up = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; T.len; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			temp = a[i] * T.a[j] + ret.a[i + j] + up;</span><br><span class="line">			<span class="keyword">if</span> (temp &gt; MAXN)</span><br><span class="line">			&#123;</span><br><span class="line">				temp1 = temp - temp / (MAXN + <span class="number">1</span>) * (MAXN + <span class="number">1</span>);</span><br><span class="line">				up = temp / (MAXN + <span class="number">1</span>);</span><br><span class="line">				ret.a[i + j] = temp1;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				up = <span class="number">0</span>;</span><br><span class="line">				ret.a[i + j] = temp;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (up != <span class="number">0</span>)</span><br><span class="line">			ret.a[i + j] = up;</span><br><span class="line">	&#125;</span><br><span class="line">	ret.len = i + j;</span><br><span class="line">	<span class="keyword">while</span> (ret.a[ret.len - <span class="number">1</span>] == <span class="number">0</span> &amp;&amp; ret.len &gt; <span class="number">1</span>)ret.len--;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line">BigNum BigNum::<span class="keyword">operator</span>/(<span class="keyword">const</span> <span class="keyword">int</span>&amp; b)<span class="keyword">const</span> <span class="comment">//大数对一个整数进行相除运算</span></span><br><span class="line">&#123;</span><br><span class="line">	BigNum ret;</span><br><span class="line">	<span class="keyword">int</span> i, down = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">	&#123;</span><br><span class="line">		ret.a[i] = (a[i] + down * (MAXN + <span class="number">1</span>)) / b;</span><br><span class="line">		down = a[i] + down * (MAXN + <span class="number">1</span>) - ret.a[i] * b;</span><br><span class="line">	&#125;</span><br><span class="line">	ret.len = len;</span><br><span class="line">	<span class="keyword">while</span> (ret.a[ret.len - <span class="number">1</span>] == <span class="number">0</span> &amp;&amp; ret.len &gt; <span class="number">1</span>)</span><br><span class="line">		ret.len--;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> BigNum::<span class="keyword">operator</span>%(<span class="keyword">const</span> <span class="keyword">int</span>&amp; b)<span class="keyword">const</span> <span class="comment">//大数对一个 int类型的变量进行取模</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> i, d = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">		d = ((d * (MAXN + <span class="number">1</span>)) % b + a[i]) % b;</span><br><span class="line">	<span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line">BigNum BigNum::<span class="keyword">operator</span>^(<span class="keyword">const</span> <span class="keyword">int</span>&amp; n)<span class="keyword">const</span> <span class="comment">//大数的n次方运算</span></span><br><span class="line">&#123;</span><br><span class="line">	BigNum t, ret(<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">if</span> (n &lt; <span class="number">0</span>)<span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">	<span class="keyword">if</span> (n == <span class="number">0</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span> (n == <span class="number">1</span>)<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	<span class="keyword">int</span> m = n;</span><br><span class="line">	<span class="keyword">while</span> (m &gt; <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		t = *<span class="keyword">this</span>;</span><br><span class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; (i &lt;&lt; <span class="number">1</span>) &lt;= m; i &lt;&lt;= <span class="number">1</span>)</span><br><span class="line">			t = t * t;</span><br><span class="line">		m -= i;</span><br><span class="line">		ret = ret * t;</span><br><span class="line">		<span class="keyword">if</span> (m == <span class="number">1</span>)ret = ret * (*<span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> BigNum::<span class="keyword">operator</span>&gt;(<span class="keyword">const</span> BigNum&amp; T)<span class="keyword">const</span> <span class="comment">//大数和另一个大数的大小比较</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> ln;</span><br><span class="line">	<span class="keyword">if</span> (len &gt; T.len)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (len == T.len)</span><br><span class="line">	&#123;</span><br><span class="line">		ln = len - <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span> (a[ln] == T.a[ln] &amp;&amp; ln &gt;= <span class="number">0</span>)</span><br><span class="line">			ln--;</span><br><span class="line">		<span class="keyword">if</span> (ln &gt;= <span class="number">0</span> &amp;&amp; a[ln] &gt; T.a[ln])</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> BigNum::<span class="keyword">operator</span>&gt;(<span class="keyword">const</span> <span class="keyword">int</span>&amp; t)<span class="keyword">const</span> <span class="comment">//大数和一个int类型的变量的大小比较</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="function">BigNum <span class="title">b</span><span class="params">(t)</span></span>;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span> &gt; b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> BigNum::print() <span class="comment">//输出大数</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>, a[len - <span class="number">1</span>]);</span><br><span class="line">	<span class="keyword">for</span> (i = len - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%04d"</span>, a[i]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">Scan</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ch, flag = <span class="number">0</span>;</span><br><span class="line">	ll res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span> ((ch = getchar()) == <span class="string">'-'</span>)</span><br><span class="line">		flag = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)</span><br><span class="line">		res = ch - <span class="string">'0'</span>;</span><br><span class="line">	<span class="keyword">while</span> ((ch = getchar()) &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>)</span><br><span class="line">		res = res * <span class="number">10</span> + ch - <span class="string">'0'</span>;</span><br><span class="line">	<span class="keyword">return</span> flag ? -res : res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BigNum a, b, c, d, e, f;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	ll X, A, Y, B;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%lld%lld%lld%lld"</span>, &amp;X, &amp;A, &amp;Y, &amp;B) != EOF) &#123;</span><br><span class="line">		a = BigNum(X);</span><br><span class="line">		b = BigNum(A);</span><br><span class="line">		c = BigNum(Y);</span><br><span class="line">		d = BigNum(B);</span><br><span class="line">		e = a * d, f = b * c;</span><br><span class="line">		<span class="keyword">if</span> (e &gt; f) <span class="built_in">printf</span>(<span class="string">"&gt;\n"</span>);</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (f &gt; e) <span class="built_in">printf</span>(<span class="string">"&lt;\n"</span>);</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"=\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>（上面的code也是下面这道签到题的题解，可以自行验证）</p>
<img src="/2019/07/18/C++大数板子/image01.png">
<h2 id="Sample-Input-amp-amp-Output"><a href="#Sample-Input-amp-amp-Output" class="headerlink" title="Sample Input&amp;&amp;Output"></a>Sample Input&amp;&amp;Output</h2><blockquote>
<p>Sample Input:<br>2<br>3 10<br>1 2 0<br>4 8 3<br>6 10 1<br>2 1<br>1 1 1<br>1 1 1</p>
</blockquote>
<blockquote>
<p>Sample Output:<br>2<br>0</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.kesisour.work/2019/04/14/[PTA] 练习4.2 平衡二叉树的根/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kesisour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小宸工作站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/14/[PTA] 练习4.2 平衡二叉树的根/" itemprop="url">[PTA] 练习4.2 平衡二叉树的根</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-14T20:52:46+08:00">
                2019-04-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/04/14/[PTA] 练习4.2 平衡二叉树的根/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://www.kesisour.work/2019/04/14/[PTA] 练习4.2 平衡二叉树的根/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  465
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  2
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一道AVL树的实现题，刚好借着这个机会复习一下AVL的概念和代码。</p>
<p><a href="https://www.cnblogs.com/zhuwbox/p/3636783.html" target="_blank" rel="noopener">AVL树的概念链接</a><br><del>我真的是越来越懒了</del></p>
<h2 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h2><blockquote>
<p>将给定的一系列数字插入初始为空的AVL树，请你输出最后生成的AVL树的根结点的值。</p>
</blockquote>
<h2 id="Input-amp-amp-Output"><a href="#Input-amp-amp-Output" class="headerlink" title="Input&amp;&amp;Output"></a>Input&amp;&amp;Output</h2><blockquote>
<p>输入的第一行给出一个正整数N（≤20），随后一行给出N个不同的整数，其间以空格分隔。</p>
</blockquote>
<blockquote>
<p>在一行中输出顺序插入上述整数到一棵初始为空的AVL树后，该树的根结点的值。</p>
</blockquote>
<h2 id="Sample-Input-amp-amp-Output"><a href="#Sample-Input-amp-amp-Output" class="headerlink" title="Sample Input&amp;&amp;Output"></a>Sample Input&amp;&amp;Output</h2><p>1：</p>
<blockquote>
<p>5<br>88 70 61 96 120</p>
</blockquote>
<blockquote>
<p>70</p>
</blockquote>
<p>2：</p>
<blockquote>
<p>7<br>88 70 61 96 120 90 65</p>
</blockquote>
<blockquote>
<p>88</p>
</blockquote>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span>* <span class="title">AVLNode</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">	AVLNode Left, Right;</span><br><span class="line">	<span class="keyword">int</span> Data;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GetHeight</span><span class="params">(AVLNode A)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!A) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">int</span> L = GetHeight(A-&gt;Left);</span><br><span class="line">		<span class="keyword">int</span> R = GetHeight(A-&gt;Right);</span><br><span class="line">		<span class="keyword">return</span> max(L, R) + <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">AVLNode <span class="title">SingleLeftRotation</span><span class="params">(AVLNode A)</span> </span>&#123;</span><br><span class="line">	AVLNode B = A-&gt;Left;</span><br><span class="line">	A-&gt;Left = B-&gt;Right;</span><br><span class="line">	B-&gt;Right = A;</span><br><span class="line">	<span class="keyword">return</span> B;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">AVLNode <span class="title">SingleRightRotation</span><span class="params">(AVLNode A)</span> </span>&#123;</span><br><span class="line">	AVLNode B = A-&gt;Right;</span><br><span class="line">	A-&gt;Right = B-&gt;Left;</span><br><span class="line">	B-&gt;Left = A;</span><br><span class="line">	<span class="keyword">return</span> B;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">AVLNode <span class="title">DoubleLeftRightRotation</span><span class="params">(AVLNode A)</span> </span>&#123;</span><br><span class="line">	A-&gt;Left = SingleRightRotation(A-&gt;Left);</span><br><span class="line">	<span class="keyword">return</span> SingleLeftRotation(A);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">AVLNode <span class="title">DoubleRightLeftRotation</span><span class="params">(AVLNode A)</span> </span>&#123;</span><br><span class="line">	A-&gt;Right = SingleLeftRotation(A-&gt;Right);</span><br><span class="line">	<span class="keyword">return</span> SingleRightRotation(A);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">AVLNode <span class="title">Insert</span><span class="params">(AVLNode A, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!A) &#123;</span><br><span class="line">		AVLNode A = <span class="keyword">new</span> node();</span><br><span class="line">		A-&gt;Data = x;</span><br><span class="line">		A-&gt;Left = A-&gt;Right = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">return</span> A;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (x &lt; A-&gt;Data) &#123;</span><br><span class="line">		A-&gt;Left = Insert(A-&gt;Left, x);</span><br><span class="line">		<span class="keyword">if</span> (GetHeight(A-&gt;Left) - GetHeight(A-&gt;Right) == <span class="number">2</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (x &lt; A-&gt;Left-&gt;Data) A = SingleLeftRotation(A);</span><br><span class="line">			<span class="keyword">else</span> A = DoubleLeftRightRotation(A);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (x &gt; A-&gt;Data) &#123;</span><br><span class="line">		A-&gt;Right = Insert(A-&gt;Right, x);</span><br><span class="line">		<span class="keyword">if</span> (GetHeight(A-&gt;Right) - GetHeight(A-&gt;Left) == <span class="number">2</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (x &gt; A-&gt;Right-&gt;Data) A = SingleRightRotation(A);</span><br><span class="line">			<span class="keyword">else</span> A = DoubleRightLeftRotation(A);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> A;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n, x;</span><br><span class="line">	AVLNode A = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">		A = Insert(A, x);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>, A-&gt;Data);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.kesisour.work/2019/04/14/关于Windows换行符以及gethar-替代的讨论/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kesisour">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小宸工作站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/14/关于Windows换行符以及gethar-替代的讨论/" itemprop="url">关于Windows换行符及gethar()替代</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-14T16:54:34+08:00">
                2019-04-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/04/14/关于Windows换行符以及gethar-替代的讨论/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count fb-comments-count" data-href="http://www.kesisour.work/2019/04/14/关于Windows换行符以及gethar-替代的讨论/" itemprop="commentCount">0</span> comments
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  467
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>昨天在做2050的时候居然在第一道签到题罚了六次时？？当时直接懵逼，把题目给小伙伴帮我重新写了一个(阿洋NB！)，之后看集训群里面才知道是换行符的锅(haoyuan学长NB！)。</p>
<p>查阅了一下：<a href="https://www.cnblogs.com/xiaotiannet/p/3510586.html" target="_blank" rel="noopener">原链接</a></p>
<blockquote>
<p>在Windows中,</p>
<p>‘\r’ 回车，回到当前行的行首，而不会换到下一行，如果接着输出的话，本行以前的内容会被逐一覆盖；</p>
<p>‘\n’ 换行，换到当前位置的下一行，而不会回到行首；</p>
<p>Unix系统里，每行结尾只有“&lt;换行&gt;”，即”\n”；Windows系统里面，每行结尾是“&lt;回车&gt;&lt;换行&gt;”，即“\r\n”；Mac系统里，每行结尾是“&lt;回车&gt;”，即”\r”；。一个直接后果是，Unix/Mac系统下的文件在Windows里打开的话，所有文字会变成一行；而Windows里的文件在Unix/Mac下打开的话，在每行的结尾可能会多出一个^M符号。</p>
<p>Linux中遇到换行符(“\n”)会进行回车+换行的操作，回车符反而只会作为控制字符(“^M”)显示，不发生回车的操作。而windows中要回车符+换行符(“\r\n”)才会回车+换行，缺少一个控制符或者顺序不对都不能正确的另起一行。</p>
</blockquote>
<p>而杭电的判题机是Windows的，所以妄图单独用一个getchar()读掉回车符的操作就gg了。</p>
<p>所以，尽快熟悉String的使用吧，getline()大法好啊！</p>
<p>使用String完成循环读取字符串并挨个字符处理：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">string</span> str;</span><br><span class="line">	<span class="keyword">while</span> (getline(<span class="built_in">cin</span>, str)) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.length(); i++) &#123;</span><br><span class="line">			<span class="comment">//</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>（等等…我在写这篇文章的时候突然意识到了学长的真正意思应该是使用getline()读掉换行…）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">kesisour</p>
              <p class="site-description motion-element" itemprop="description">可持续化柠檬树参上！</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kesisour</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">12.4k</span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>本站访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>本站总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://kesisour.disqus.com/count.js" async></script>
    

    

  




	





  














  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
